import{hP as $,hQ as U,hR as l,hS as h,cM as m,hT as j,hU as M,hV as p,eT as A}from"./index-IRInvtSJ.js";function b(r,o,t,u){if(o==null||u==null)return!1;const s=$(o,u);if(s?.projector==null)return!1;if(s.projector===U)return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3]),!0;const{source:e,dest:f,projector:I}=s;if(f.spatialReferenceId===3){const n=l[e.spatialReferenceId][2];if(n==null)return!1;n(h(r),0,d,0),j(d,0,a,0);const c=R(d[1],r[2],r[3],M.radius);return p(t,a,c),!0}if(e.spatialReferenceId!==2&&e.spatialReferenceId!==5||f.spatialReferenceId!==11){I(h(r),0,a,0);const n=e.metersPerUnit??1,c=f.metersPerUnit??1,i=r[3]*n/c;p(t,a,i)}else{const n=l[e.spatialReferenceId][1],c=l[1][11];let i=r[3];n!=null&&c!=null&&(i=R(r[1],r[2],r[3],M.radius)),I(h(r),0,a,0),p(t,a,i)}return!0}function R(r,o,t,u){const s=u+o;if(s<u/2||t>s)return Number.MAX_VALUE;const e=Math.abs(P*r)+Math.asin(t/s);return e>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(e)}const d=m(),a=m(),P=A(1);export{b as l};
